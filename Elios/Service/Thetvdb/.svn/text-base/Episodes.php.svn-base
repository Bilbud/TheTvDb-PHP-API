<?php

/**
 * Elios_Db_Vendor_Thetvdb_Episodes
 */
class Elios_Db_Vendor_Thetvdb_Episodes
{
	public $_collection;
	
	
	
	/**
	 * 
	 * Enter description here ...
	 * @param integer $thetvdb_id
	 * @param lang $lang
	 */
	public function getEpisode($thetvdb_id ,$lang = 'en'){
		$episode = new Elios_Db_Vendor_Thetvdb_Episode();
		$episode->language = $lang;
		$episode->thetvdb_id = $thetvdb_id;
		$episode->populate();
		return $episode;
	}
	
	
	
	
	
	
	/*
	

	public function findBySerieTvdbid($tvdb_id,$lang)
	{
		//Construction de la requete
		$query = new Elios_Db_Vendor_Thetvdb_QueryBuilder();
		$query->select("Episode");
		$query->from("/api/".$query->apikey."/series/".$tvdb_id."/all/".$lang.".xml",Elios_Db_Vendor_Thetvdb_QueryBuilder::XMLMASK);
		$query->getQueryAsString();
		$episodes = $query->execute();
					
		foreach($episodes as $e)
		{
			$thetvdb_Episode = new Elios_Db_Vendor_Thetvdb_Episode();	
			$thetvdb_Episode->language = $lang;
			foreach ($e->childNodes as $node)
			{
				switch ($node->nodeName) 
				{
					case "id":
						$thetvdb_Episode->thetvdb_id = $node->nodeValue;
					break;
					
					case "Combined_season":
						$thetvdb_Episode->saison = $node->nodeValue;
					break;
					case "seasonid":
						$thetvdb_Episode->saison_id = $node->nodeValue;
					break;
					case "Combined_episodenumber":
						$thetvdb_Episode->episode = $node->nodeValue;
					break;
					case "Overview":
						$thetvdb_Episode->overview = addslashes($node->nodeValue);
					break;
					case "lastupdated":
						$thetvdb_Episode->lastupdated = $node->nodeValue;
					break;
					case "EpisodeName":
						$thetvdb_Episode->titre = $node->nodeValue;
					default:
					break;
				}
			}
			$this->_collection[] = $thetvdb_Episode;
		}
    	return $this->_collection;	
	}
	
	public function fineOneById($tvdbid)
	{
		
	}
	

	public function getUpdateList($lastupdated)
	{
		$thetvdb = new Elios_Db_Vendor_Thetvdb_Thetvdb();
    	return $thetvdb->getUpdateList("Episode",$lastupdated);
	}*/
}